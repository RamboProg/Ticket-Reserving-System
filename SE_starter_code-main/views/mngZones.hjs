<!DOCTYPE html>
<html>

<head>

    <head>
        <title>Manage Zones</title>
        <link rel="stylesheet" href="/styles/bootstrap.min.css" />
        <link rel="stylesheet" href="/styles/style.css" />
        <script src="/js/jquery-2.2.0.min.js" type="text/javascript"></script>
        <script src="/js/bootstrap.min.js" type="text/javascript"></script>
    </head>
</head>

<body>
    <script>
        $(document).ready(function () {
            $.ajax({
                type: "GET",
                url: '/api/v1/zones',

                success: function (data) {
                    console.log(data);
                    for (let row of data) {
                       $('#tbody').append(
                        `<tr>
                             <td class="text-center">${row.id}</td>
                             <td class="text-center">${row.zonetype}</td>
                             <td class="text-center">${row.price}</td>
                             <td class="text-center">
                                <button id=${row.id} class="btn btn-primary update" type="button">Update Price</button>
                             </td>
                         </tr>`);
                    }
                },
                error: function (errorResponse) {
                    if (errorResponse) {
                        alert(`Cannot View error: ${errorResponse.responseText}`);
                    }
                }
                });
                
             $('#tbody').on('click', '.update', function () {

            var id = $(this).attr('id');
            console.log(id);

            var myNewName = prompt("Enter new Price");


            $.ajax({
                type: "PUT",
                url: `/api/v1/zones/ ${id}`,
                data: {newprice: myNewName},
                success: function (data) {
                    alert(data)
                },
                error: function (error) {
                    alert(error.responseText)
                }
            });
        });

            
            
        });
    </script>
    <div class="container position-relative">
    <table class="table table-striped">
        <thead>
        <tr>
            <th class="text-center">ID</th>
            <th class="text-center">Type</th>
            <th class="text-center">Price</th>
        </tr>
        </thead>
        <tbody id="tbody">

        </tbody>
    </table>
</body>

</html>