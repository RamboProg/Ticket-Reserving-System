<!DOCTYPE html>
<html>
<head>
    <head>
        <title>Request Refund</title>
        <link rel="stylesheet" href="/styles/bootstrap.min.css" />
        <link rel="stylesheet" href="/styles/style.css" />
        <script src="/js/jquery-2.2.0.min.js" type="text/javascript"></script>
        <script src="/js/bootstrap.min.js" type="text/javascript"></script>
    </head>
</head>

<body>
    <script>
        $(document).ready(function () {
            $.ajax({
                type: "PUT",
                url: '/api/v1/requests/refunds/:requestId',

                success: function (serverResponse) {
                    console.log(serverResponse);
                    for (let row of data) {
                        $('#tbody').append(
                            `<tr>
                                <td class="text-center">${row.id}</td>
                                <td class="text-center">${row.status}</td>
                                <td class="text-center">${row.userid}</td>
                                <td class="text-center">${row.refundamount}</td>
                                <td class="text-center">${row.ticketid}</td>
                            </tr>`
                        );
                    }
                },
                error: function (errorResponse) {
                    if (errorResponse) {
                        alert(`Cannot View Refund Requests error: ${errorResponse.responseText}`);
                    }
                }
            });
            $('#tbody').on('Click', '.refuse'.function(){
                console.log('refuse request');
                var id = $(this).attr('data-id');
                $.ajax({
                    type: "PUT",
                    url: '/api/v1/requests/refunds/:requestId',
                    success: function(serverResponse){
                        console.log(serverResponse);
                        alert('Refund Request Refused');
                    },
                    error: function(errorResponse){
                        if(errorResponse){
                            alert(`Cannot Refuse Refund Request error: ${errorResponse.responseText}`);
                        }
                    }
                });
            });
        });
        $('#tbody').on('Click', '.approve'.function(){
            console.log('approve request');
            var id = $(this).attr('data-id');
            $.ajax({
                type: "PUT",
                url: '/api/v1/requests/refunds/:requestId',
                success: function(serverResponse){
                    console.log(serverResponse);
                    alert('Refund Request Approved');
                },
                error: function(errorResponse){
                    if(errorResponse){
                        alert(`Cannot Approve Refund Request error: ${errorResponse.responseText}`);
                    }
                }
            });
        });
    </script>
    <table class="table table-striped">
        <thread>
            <tr>
                <th class="text-center">Request ID</th>
                <th class="text-center">Status</th>
                <th class="text-center">User ID</th>
                <th class="text-center">Refund Amount</th>
                <th class="text-center">Ticket ID</th>
            </tr>
        </thread>
        <tbody id="tbody">
        </tbody>
    </table>
</body>

</html>